@using PagedList
@using PagedList.Mvc
@using Twitter.App.Models.ViewModels
@model IEnumerable<Twitter.App.Models.ViewModels.TweetViewModel>

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
<link rel="stylesheet" href="https://code.getmdl.io/1.1.1/material.indigo-pink.min.css">
<link href="~/Content/PagedList.css" rel="stylesheet">

@{
    ViewBag.Title = "Square Talk";
}

<div>
    <section id="NewTweetButton" class="index-section" style="float: right">
        @using (Ajax.BeginForm("NewTweetForm", "Tweets", new AjaxOptions
        {
            UpdateTargetId = "new-tweet",
            InsertionMode = InsertionMode.Replace,
            HttpMethod = "GET",
            OnSuccess = "app.showNewTweetModal"
        }))
        {
            @*<button type="submit" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect"
                        style="float: right">
                    <i class="material-icons">add</i>
                </button>*@

            <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-shadow--4dp mdl-color--accent" id="Tweetadd"
                    style="float: right">
                <i class="material-icons" role="presentation">add</i>
                <span class="visuallyhidden">Add</span>
            </button>
        }
    </section>

    @*<section id="NewEventButton" class="index-section" style="float: right">
        @using (Ajax.BeginForm("NewTweetForm", "Tweets", new AjaxOptions
        {
            UpdateTargetId = "new-tweet",
            InsertionMode = InsertionMode.Replace,
            HttpMethod = "GET",
            OnSuccess = "app.showNewTweetModal"
        }))
        {
            <button type="submit" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect"
                    style="float: right">
                <i class="material-icons">add</i>
            </button>
        }
    </section>*@
</div>


<div id="tweets">

    @{ Html.RenderPartial("_Tweets", Model); }

</div>

@*<div class="paging">
    <ul class="pagination">
        @for (int i = 0; i <= Model.Count(); i++)
        {
            if (i % 10 == 0)
            {
                <li>
                    @Ajax.ActionLink((i / 10 + 1).ToString(), "TweetsByPage",
                        new { page = (i / 10) + 1 },
                        new AjaxOptions { UpdateTargetId = "tweets", InsertionMode = InsertionMode.Replace })
                </li>
            }
        }
    </ul>
</div>*@

<div class="paging">
    <ul class="pagination">
        
        @{
            var data = Model as IPagedList<TweetViewModel>;
        }

        @Html.PagedListPager(list: data, generatePageUrl: page => Url.Action("Index", new {p = page}))
    
    </ul>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
