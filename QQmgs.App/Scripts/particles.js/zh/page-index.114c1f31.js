(function(z){
var iT=function(){z.R.call(this)};var jT=function(){(0,window.$)("body").on("click",".org-tip a",function(a){a.preventDefault();z.X.alert({title:"申请注册机构帐号",modal:!0,content:(0,window.$)("#org-tip").html(),buttons:{yes:"确认"}})});(0,window.$)('input[autocomplete\x3d"off"]').val("")};
var kT=function(){var a=(0,window.$)(".QRCode-card"),b=(0,window.$)(".QRCode-toggleButton"),c=(0,window.$)(".QRCode-toggleButtonText",b);(0,window.$)("body").on("click",function(d){a.is(":visible")?Boolean((0,window.$)(d.target).closest(a).length)||(a.addClass("fadeOutDown").onTransitionEnd(function(){a.hide().removeClass("fadeOutDown")},200),c.text("下载知乎 App")):Boolean((0,window.$)(d.target).closest(b).length)&&(a.addClass("fadeInUp").show().onTransitionEnd(function(){a.removeClass("fadeInUp")},
200),c.text("关闭二维码"))})};var lT=function(){var a=(0,window.$)(".sign-flow");if(a.length){var b=new mT;b.w(a[0]);b.g("trackRequested",function(a){a.preventDefault();a.label="home_default";z.yi(a)})}};
var nT=function(){function a(){var a=window.particlesJS;a&&((0,window.$)("\x3cdiv\x3e",{id:"particles"}).appendTo("body"),a("particles",c))}var b=!!window.HTMLCanvasElement,c={particles:{number:{value:20,density:{enable:!0,value_area:1E3}},color:{value:"#e1e1e1"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:15,random:!0,anim:{enable:!1,
speed:180,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:650,color:"#cfcfcf",opacity:.26,width:1},move:{enable:!0,speed:2,direction:"none",random:!0,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"repulse"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},
push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0};(0,window.$)(function(){b&&window.$.ajax({url:"/static/revved/components/particles.js/particles.min.00debcf6.js",dataType:"script",cache:!0}).then(a)})};var mT=function(){z.R.call(this)};var oT=function(a){return!/^\+?[0-9]+$/.test(a)};var pT=function(a,b){a.account&&(a[b]=a.account,delete a.account)};
var qT=function(a){var b=(0,window.$)(".index-tab-navs a",a.m()),c=(0,z.t)(function(){var a=window.location.hash||b.filter(".active").attr("href"),c=b.filter(function(){return(0,window.$)(this).attr("href")===a});c.addClass("active").siblings().removeClass("active");c.parent().attr("data-active-index",c.index());"#signin"===a?this.$k.is(":visible")||(this.Vf.hide(),this.$k.show(),this.Jl()):"#signup"!==a||this.Vf.is(":visible")||(this.$k.hide(),this.Vf.show(),this.Jl())},a);a.o().g(window,"hashchange",
c);c()};var rT=function(a){a.$k=(0,window.$)(".view-signin",a.m());var b=(0,window.$)("form",a.$k),c=(0,window.$)("button.submit",b);b.validate(window.$.extend({},z.Zm,{submitHandler:z.vk(c,window.$.proxy(a.FA,a))}));var d=(0,window.$)('input[name\x3d"account"]',b);(0,window.$)(".unable-login",a.$k).click(function(){(new z.Gk(d.val())).show()});b=(0,window.$)(".captcha-module, .Captcha",b).get(0);a.Qt=new z.ek("login");a.Qt.w(b);z.ik(a.Qt)};
var sT=function(a){a.Vf=(0,window.$)(".view-signup",a.m());var b=(0,window.$)("form",a.Vf);a.Mh=!(0,window.$)('input[name\x3d"phone_num"]',b).length;var c=(0,window.$)("button.submit",b);b.validate(window.$.extend({},z.Zm,{submitHandler:z.vk(c,window.$.proxy(a.Hp,a))}));var d=(0,window.$)('input[name\x3d"account"]',b);a.Vf.on("click",".switch-to-login",function(){window.location.hash="#signin";var b=d.val();b&&(0,window.$)('input[name\x3d"account"]',a.yY).val(b)}).on("change",".agreement input",function(){var a=
(0,window.$)(this);a.is(":checked")&&a.parents(".agreement").find(".error").remove()});c=(0,window.$)(".input-wrapper[data-type]",b).get(0);a.Qp=new z.ek;a.Qp.w(c);z.ik(a.Qp);a.cn=new z.Tk(b);a.cn.start()};var tT=function(){var a=z.hj.get("accountcallback");z.hj.remove("accountcallback");if(a){a=(0,window.decodeURIComponent)(a);try{var b=JSON.parse(a);z.Y.dispatchEvent(new z.ak("accountcallback",b))}catch(c){}}};z.y(iT,z.R);iT.prototype.init=function(){this.w(window.document.body)};
iT.prototype.C=function(a){iT.v.C.call(this,a);lT();nT();kT();jT();z.yi({category:"view_home",action:"visit_home"})};z.y(mT,z.R);z.e=mT.prototype;z.e.C=function(){mT.v.C.call(this);this.yz()};z.e.ma=function(a){this.dispatchEvent(window.$.extend({type:"trackRequested"},a))};
z.e.yz=function(){function a(a,b){(0,window.$)(":submit",a).click(function(){return b(a)});(0,window.$)("keydown",a).click(function(c){if(13===c.keyCode)return b(a)})}rT(this);sT(this);this.Lo();tT();this.Jl();qT(this);var b=this,c=this.m();a((0,window.$)(".view-signin form",c),function(a){a=a.we().account;var c=oT(a);b.ma({category:"sign_in",action:a?"click_sign_in_submit_"+(c?"email":"phone"):"click_sign_in_submit_no_channel"})});a((0,window.$)(".view-signup form",c),function(a){a=a.we();a=a.phone_num||
a.account;var c=b.Mh?oT(a):!1;b.ma({category:"sign_up",action:a?b.Mh?"click_sign_up_submit_"+(c?"email":"phone"):"click_sign_up_submit_phone":"click_sign_up_submit_no_channel"})});(0,window.$)(".js-bindweibo",c).click(function(){b.ma({category:"sign_in_or_sign_up",action:"click_sign_with_weibo_start"});z.bk("sina")});(0,window.$)(".js-bindqq",c).click(function(){b.ma({category:"sign_in_or_sign_up",action:"click_sign_with_qq_start"});z.bk("qq")});(0,window.$)(".js-bindwechat",c).click(function(){b.ma({category:"sign_in_or_sign_up",
action:"click_sign_with_wechat_start"});z.bk("wechat")});(0,window.$)(".js-toggle-sns-buttons").click(function(){var a=(0,window.$)(".sns-buttons");a.hasClass("is-visible")?a.onTransitionEnd(function(){a.css("visibility","hidden")},250).removeClass("is-visible"):a.css("visibility","visible").addClass("is-visible")})};
z.e.FA=function(a){var b=this,c=(0,window.$)(a),d=c.we(),f=oT(d.account);this.ma({category:"sign_in",action:"sign_in_front_end_pass_"+(f?"email":"phone")});a=f?"/login/email":"/login/phone_num";z.Ik&&(d.is_org_page=1);f?pT(d,"email"):pT(d,"phone_num");var g=this.Qt.info();return window.$.post(a,d,function(a){var k=a&&!a.r,l=Object.assign({},{status:{result:k?"Success":a.data&&a.data.captcha?"BadCaptcha":"Fail"}},g);k?(b.ma({Ec:!0,category:"sign_in",action:"sign_in_success_"+(f?"email":"phone")}),
b.Xd()):(k=a.errcode,1991831===k?(a=new z.Ek({data:{phone_num:d.phone_num,password:d.password},wU:function(a){c.data("validator").showErrors(a)}}),a.Jb(b),a.G(!0)):200001===k?(a='机构帐号\x3cspan\x3e · \x3c/span\x3e\x3ca href\x3d"/org/signin"\x3e点此登录\x3c/a\x3e',z.Ik&&(a='个人帐号\x3cspan\x3e · \x3c/span\x3e\x3ca href\x3d"/signin"\x3e点此登录\x3c/a\x3e'),c.data("validator").showErrors({account:a})):(z.ik(b.Qt),c.data("validator").showErrors(a.data)));b.trackEvent(b.$k.get(0),"SignIn","Button",l)})};
z.e.Hp=function(a){var b=this;a=(0,window.$)(a);var c=a.we(),d=b.Mh?oT(c.account):!1;b.ma({Ec:!0,category:"sign_up",action:"sign_up_front_end_pass_"+(d?"email":"phone")});var f=d?"/register/email":"/register/phone_num/validation";z.Ik&&(d=!0,f="/register/org");d?pT(c,"email"):pT(c,"phone_num");var g=this.cn.stop();c.userInfo=JSON.stringify(g);var h=a.data("validator"),k=b.Qp.info();return window.$.post(f,c,function(a){var f=a&&!a.r,g=Object.assign({},{status:{result:f?"Success":a.data&&a.data.captcha?
"BadCaptcha":"Fail"}},k);d?f?(b.ma({Ec:!0,category:"sign_up",action:"sign_up_success_email"}),b.Xd()):(z.ik(b.Qp),h.showErrors(a.data)):f?(a=new z.vw(c),a.Jb(b),a.G(!0)):(z.ik(b.Qp),b.Mh||pT(a.data,"phone_num"),h.showErrors(a.data));b.trackEvent(b.Vf.get(0),"SignUp","Button",g)})};z.e.Jl=function(){if(!z.yk){var a=this.m();(0,window.setTimeout)(function(){(0,window.$)("input[placeholder]:visible",a).placeholder()},10)}};z.e.Lo=function(){z.dk(this.o(),this.KT)};
z.e.KT=function(a){a=a.Hf;var b={qqconn:"qq",wechat:"wechat",sina:"weibo"}[a.type];1===a.login?(this.ma({Ec:!0,category:"sign_in",action:"sign_in_success_"+b}),this.Xd()):(a=new z.Lk(a),a.Jb(this),a.show())};z.e.Xd=function(){var a=(new z.qh(window.location.href)).pe().get("next");a?window.location.href=a:window.location.reload()};z.e.trackEvent=function(a,b,c,d){(0,z.Ni)(a,{action:b,element:c},d)};z.x("ZH.entrySignPage",function(){(new iT).init()});z.kg("page-index");}).call(this, __z_z__);
//# sourceURL=/static/revved/-/js/closure/page-index.114c1f31.js